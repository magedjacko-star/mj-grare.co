<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Concerts | Michael Jackson</title>

  <style>
    :root{
      --red:#e50914;
      --bg:#000;
      --panel:#0b0b0b;
      --panel2:#111;
      --line:#1f1f1f;
      --muted:#b3b3b3;
    }
    *{ box-sizing:border-box; }
    body{ margin:0; background:var(--bg); color:#fff; font-family: Arial, sans-serif; }
    .wrap{ min-height:100vh; }

    .content{ padding:26px; }
    .header{ max-width:1200px; margin:0 auto 14px; text-align:center; }
    h1{ color:var(--red); margin:8px 0 8px; font-size:40px; letter-spacing:.4px; }
    .sub{ color:var(--muted); margin:0 0 16px; font-size:14px; }

    .topbar{
      max-width:1200px;
      margin:0 auto 18px;
      display:flex;
      justify-content:center;
      gap:12px;
      flex-wrap:wrap;
    }
    .search{
      width:min(560px, 92vw);
      padding:12px 14px;
      border-radius:12px;
      border:1px solid #2a2a2a;
      background:#0b0b0b;
      color:#fff;
      outline:none;
      font-size:15px;
    }

    .grid{
      max-width:1200px; margin:0 auto;
      display:grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      gap:18px;
    }

    .card{
      position:relative;
      background:linear-gradient(180deg, var(--panel2), var(--panel));
      border:1px solid var(--line);
      border-radius:14px;
      overflow:hidden;
      box-shadow:0 0 18px rgba(255,255,255,.06);
      transition:.2s;
      transform:translateY(10px);
      opacity:0;
      animation:fadeUp .55s ease forwards;
    }
    @keyframes fadeUp{ to { opacity:1; transform:translateY(0); } }
    .card:hover{
      transform:translateY(-4px) scale(1.03);
      box-shadow:0 0 45px rgba(229,9,20,.35);
      border-color:rgba(229,9,20,.35);
    }

    .thumb{ position:relative; background:#000; overflow:hidden; }
    .thumb img{
      width:100%; height:165px; object-fit:cover; display:block;
      transform:scale(1); transition:transform .25s ease;
    }
    .card:hover .thumb img{ transform:scale(1.08); }

    .badge{
      position:absolute; left:12px; bottom:12px;
      padding:8px 12px; border-radius:999px; font-weight:900;
      background:rgba(0,0,0,.65); border:1px solid rgba(255,255,255,.08);
      backdrop-filter: blur(4px);
      display:inline-flex; align-items:center; gap:8px;
    }
    .badge .dot{
      width:10px; height:10px; border-radius:50%;
      background:var(--red); box-shadow:0 0 14px rgba(229,9,20,.8);
    }

    .title{
      padding:14px 14px 6px;
      font-weight:900; text-align:center; font-size:18px; letter-spacing:.2px;
    }
    .meta{
      padding:0 14px 14px; text-align:center;
      color:var(--muted); font-size:13px; line-height:1.4;
    }
    .card a{ text-decoration:none; color:inherit; display:block; }

    .footerWrap{
      max-width:1200px; margin:40px auto 0; padding:18px 0 4px;
      background:linear-gradient(0deg,#000 65%, transparent);
    }
    .footer{ display:flex; justify-content:center; gap:12px; flex-wrap:wrap; }
    .footer a{
      display:inline-block; padding:12px 20px; border-radius:10px;
      background:#2b2b2b; color:#fff; text-decoration:none; font-weight:900; transition:.2s;
    }
    .footer a:hover{ background:var(--red); transform:scale(1.03); }

    /* Admin Bar */
    #adminBar{
      position:fixed; bottom:24px; right:24px;
      display:none; gap:10px; z-index:1000;
    }
    .adminBtn{
      background:var(--red); color:#fff; border:none;
      padding:14px 18px; border-radius:12px; font-weight:900;
      cursor:pointer; box-shadow:0 0 18px rgba(229,9,20,.6);
    }
    .adminBtn.secondary{
      background:#333; box-shadow:0 0 12px rgba(255,255,255,.12);
    }

    .delBadge{
      position:absolute; top:10px; right:10px;
      background:rgba(229,9,20,.95); color:#fff; border:none;
      border-radius:10px; padding:8px 10px; font-weight:900;
      cursor:pointer; display:none; z-index:5;
      box-shadow:0 0 14px rgba(229,9,20,.55);
    }
    body.admin .delBadge{ display:block; }

    /* Upload Modal */
    #uploadModal{
      position:fixed; inset:0;
      background:rgba(0,0,0,.85);
      display:none; align-items:center; justify-content:center;
      z-index:999; padding:18px;
    }
    .modal-box{
      background:#111; padding:22px; border-radius:14px;
      width:min(380px, 92vw); text-align:center;
      border:1px solid rgba(255,255,255,.08);
      box-shadow:0 0 22px rgba(255,255,255,.10);
    }
    .modal-box h2{ margin:0 0 10px; color:#fff; }
    .modal-box input{
      width:100%; margin:8px 0; padding:10px;
      border-radius:8px; outline:none;
      background:#0b0b0b; color:#fff;
      border:1px solid rgba(255,255,255,.08);
    }
    .modal-box button{
      width:100%; padding:10px; margin-top:8px;
      border:none; border-radius:8px; font-weight:900; cursor:pointer;
    }
    .modal-box .save{ background:var(--red); color:#fff; }
    .modal-box .cancel{ background:#444; color:#fff; }
    .hint{
      margin:10px auto 0; max-width:360px;
      color:rgba(255,255,255,.65); font-size:12px; line-height:1.5; text-align:left;
    }

    @media (max-width:900px){
      .content{ padding:18px; }
      h1{ font-size:34px; }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <main class="content">
      <div class="header">
        <h1>Michael Jackson Concerts</h1>
        <p class="sub">Search ‚Ä¢ Click any poster to watch</p>
      </div>

      <div class="topbar">
        <input id="q" class="search" type="text" placeholder="Search concerts..." />
      </div>

      <div id="grid" class="grid"></div>

      <div class="footerWrap">
        <div class="footer">
          <a href="../index.html">üè† Back to Home</a>
        </div>
      </div>
    </main>
  </div>

  <!-- Admin Bar -->
  <div id="adminBar">
    <button id="uploadBtn" class="adminBtn" type="button">‚ûï Upload</button>
    <button id="exitAdminBtn" class="adminBtn secondary" type="button">‚úñ Exit</button>
  </div>

  <!-- Upload Modal -->
  <div id="uploadModal">
    <div class="modal-box">
      <h2>Upload New Concert</h2>
      <input id="concertTitle" type="text" placeholder="Concert Title" />
      <input id="concertUrl" type="text" placeholder="YouTube Link (or any URL)" />
      <input id="concertThumb" type="file" accept="image/*" />
      <button class="save" id="saveBtn" type="button">Save Concert</button>
      <button class="cancel" id="cancelUploadBtn" type="button">Cancel</button>

      <div class="hint">
        <b>Note:</b> Upload ÿ®Ÿäÿ≠ŸÅÿ∏ ÿπŸÑŸâ ŸÜŸÅÿ≥ ÿßŸÑÿ¨Ÿáÿßÿ≤ ŸÅŸÇÿ∑ (localStorage).<br/>
        ŸÑŸà ÿπÿßŸäÿ≤Ÿáÿß ÿ™ÿ®ÿßŸÜ ŸÑŸÉŸÑ ÿßŸÑŸÜÿßÿ≥ ÿπŸÑŸâ ÿßŸÑŸÜÿ™: ŸÑÿßÿ≤ŸÖ ÿ™ÿ∂ŸäŸÅŸáÿß ŸÅŸä ÿßŸÑŸÇÿßÿ¶ŸÖÿ© Static ÿ™ÿ≠ÿ™.
      </div>
    </div>
  </div>

  <script>
    const grid        = document.getElementById("grid");
    const q           = document.getElementById("q");
    const adminBar    = document.getElementById("adminBar");
    const uploadModal = document.getElementById("uploadModal");

    const LS_ITEMS         = "mj_concerts";
    const LS_HIDDEN_STATIC = "mj_hidden_static_concerts";
    const LS_ADMIN_FLAG    = "mj_admin";

    // ‚úÖ ŸäÿÆŸÑŸä ÿ£ÿ≥ŸÖÿßÿ° ÿßŸÑŸÖŸÑŸÅÿßÿ™ ÿßŸÑŸÑŸä ŸÅŸäŸáÿß ŸÖÿ≥ÿßŸÅÿßÿ™/ŸÉŸàŸÖŸëÿß ÿ™ÿ¥ÿ™ÿ∫ŸÑ ÿπŸÑŸâ GitHub
    function fileUrl(path){
      if (typeof path === "string" && path.startsWith("data:")) return path;
      return encodeURI("thumbs/" + path);
    }

    const staticConcerts = [
      { title:"Dangerous Tour", url:"https://youtu.be/fKFX_iMFDiU", img:"dangerous-tour.jpg", meta:"YouTube" },
      { title:"Bad Tour", url:"https://youtu.be/U_q9TR8tj_g", img:"bad-tour.jpg", meta:"YouTube" },
      { title:"HIStory Tour", url:"https://youtu.be/SDDC-QdOR14", img:"history-tour.jpg", meta:"YouTube" },

      { title:"LIVE AT MSG, 2001 - 30th Anniversary Celebration", url:"https://youtu.be/jaDEmw2ER0w ", img:"live-at-msg-2001-30th-anniversary-celebration.jpg", meta:"YouTube" },

      { title:"The Jacksons Victory Tour (Toronto)", url:"https://youtu.be/vnIk5mGy9As", img:"the-jacksons-victory-tour-toronto-1984.jpg", meta:"YouTube" },

      { title:"Michael Jackson ‚Äì This Is It", url:"https://ww4.tinyzone.org/movie/michael-jacksons-this-is-it-9870/", img:"michael-jackson-this-is-it.jpg", meta:"Watch" },

      { title:"MTV Awards Performance (1995)", url:"https://youtu.be/TwsRaUh4N3c?si=feBMwxQOyDMlHNsP", img:"mtv-awards-performance-1995.jpg", meta:"YouTube" },
      { title:"Dangerous (2002)", url:"https://youtu.be/OfcQefxNdsw?si=sJSl4VmhBgv8RW1c", img:"dangerous-2002.jpg", meta:"YouTube" },
      { title:"Dangerous (1999)", url:"https://youtu.be/FvBnkoms9hA?si=1ztzlK8WNwI_yVGl", img:"dangerous-1999.jpg", meta:"YouTube" },

      { title:"The Jacksons - Destiny Tour (1979)", url:"https://youtu.be/Gx0-sRC4m7g?si=X90fuLuTxpS7MaNp", img:"the-jacksons-1979-destiny-tour.jpg", meta:"YouTube" },
      { title:"Michael Jackson - Motown 25", url:"https://youtu.be/BUcUS2cIieA?si=sHsq9hb2sdpcmwhH", img:"michael-jackson5 motown-25.jpg", meta:"YouTube" },

      { title:"MJ & Friends - Live in Seoul (1999)", url:"https://youtu.be/V1IpXTwz1sE?si=wyUEF3VHhxZvuXFf", img:"michael-jackson-mj-friends,-live-in-seoul-1999.jpg", meta:"YouTube" },
      { title:"Live in Brunei Royal Concert (1996)", url:"https://youtu.be/q_37GxaANBc?si=xLPARLtc5LLSJ3dF", img:"michael-jackson-live-in-brunei-royal-concert,-1996.jpg", meta:"YouTube" },

      { title:"1993 Halftime Show", url:"https://youtu.be/q_37GxaANBc?si=xLPARLtc5LLSJ3dF", img:"1993-halftime-show-full-mj.jpg", meta:"YouTube" },

      { title:"Earth Song - TV Show (Nov 1995)", url:"https://youtu.be/g1acN5_y21o?si=TM0wjyaZxhiDLgfV", img:"michael-jackson-dangerous,-earth-song-tv-show-november1995.jpg", meta:"YouTube" },
      { title:"HIStory Tour - Brunei (1996)", url:"https://youtu.be/pOLIlv92LdI?si=DXxojV4f8IGKjfmO", img:"michael-jackson-history-tour-brunei-1996.jpg", meta:"YouTube" },

      { title:"Anniversary (1991)", url:"https://youtu.be/fVpy2XYH5Pg?si=L0JSIKZSvLwZc5gJ", img:"anniversary-1991-michael-jackson.jpg", meta:"YouTube" }
    ];

    function escapeHtml(s){
      return String(s).replace(/[&<>"']/g, (m) => ({
        "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
      }[m]));
    }

    function getDynamic(){
      try { return JSON.parse(localStorage.getItem(LS_ITEMS) || "[]"); }
      catch(e){ return []; }
    }
    function setDynamic(arr){ localStorage.setItem(LS_ITEMS, JSON.stringify(arr)); }

    function getHiddenStatic(){
      try { return JSON.parse(localStorage.getItem(LS_HIDDEN_STATIC) || "[]"); }
      catch(e){ return []; }
    }
    function setHiddenStatic(arr){ localStorage.setItem(LS_HIDDEN_STATIC, JSON.stringify(arr)); }

    function enableAdmin(){
      document.body.classList.add("admin");
      adminBar.style.display = "flex";
      localStorage.setItem(LS_ADMIN_FLAG, "1");
    }
    function disableAdmin(){
      document.body.classList.remove("admin");
      adminBar.style.display = "none";
      localStorage.setItem(LS_ADMIN_FLAG, "0");
      closeUpload();
    }

    document.addEventListener("keydown", (e)=>{
      if(e.ctrlKey && e.shiftKey && e.key.toLowerCase()==="m"){
        const on = localStorage.getItem(LS_ADMIN_FLAG) === "1";
        if(on) disableAdmin(); else enableAdmin();
      }
    });
    if(localStorage.getItem(LS_ADMIN_FLAG) === "1"){ enableAdmin(); }
    document.getElementById("exitAdminBtn").onclick = disableAdmin;

    function makeCard(item, opts){
      const meta = item.meta || "Watch";
      const card = document.createElement("div");
      card.className = "card";
      card.dataset.type = opts.type;
      card.dataset.key  = opts.key;

      card.innerHTML = `
        <button class="delBadge" type="button">üóëÔ∏è Delete</button>
        <a href="${item.url}" target="_blank" rel="noopener">
          <div class="thumb">
            <img src="${fileUrl(item.img)}" alt="${escapeHtml(item.title)}" onerror="this.style.opacity=.2">
            <div class="badge"><span class="dot"></span> ${escapeHtml(meta)}</div>
          </div>
          <div class="title">${escapeHtml(item.title)}</div>
          <div class="meta">${escapeHtml(item.meta || "YouTube / Link")}</div>
        </a>
      `;

      const delBtn = card.querySelector(".delBadge");
      delBtn.addEventListener("click", (ev)=>{
        ev.preventDefault(); ev.stopPropagation();

        if(opts.type === "dynamic"){
          if(!confirm("Delete this concert?")) return;
          const arr = getDynamic().filter(x => x.id !== opts.key);
          setDynamic(arr);
          card.remove();
          applySearch();
        }else{
          if(!confirm("Hide/Delete this static concert from the page?")) return;
          const hidden = getHiddenStatic();
          hidden.push(opts.key);
          setHiddenStatic(hidden);
          card.remove();
          applySearch();
        }
      });

      return card;
    }

    function renderAll(){
      grid.innerHTML = "";
      const hidden = new Set(getHiddenStatic());

      staticConcerts.forEach((c, i)=>{
        const key = `${c.title}||${c.img}||${c.url}`;
        if(hidden.has(key)) return;

        const card = makeCard(c, { type:"static", key });
        card.style.animationDelay = (0.04 + i*0.04) + "s";
        grid.appendChild(card);
      });

      const dyn = getDynamic();
      dyn.forEach((c, j)=>{
        const card = makeCard(c, { type:"dynamic", key:c.id });
        card.style.animationDelay = (0.04 + (staticConcerts.length + j)*0.04) + "s";
        grid.appendChild(card);
      });
    }

    function applySearch(){
      const term = q.value.trim().toLowerCase();
      Array.from(grid.children).forEach(card=>{
        const t = (card.querySelector(".title")?.textContent || "").toLowerCase();
        card.style.display = t.includes(term) ? "" : "none";
      });
    }
    q.addEventListener("input", applySearch);

    document.getElementById("uploadBtn").onclick = ()=>{ uploadModal.style.display = "flex"; };

    function closeUpload(){
      uploadModal.style.display = "none";
      document.getElementById("concertTitle").value = "";
      document.getElementById("concertUrl").value = "";
      document.getElementById("concertThumb").value = "";
    }
    document.getElementById("cancelUploadBtn").onclick = closeUpload;

    function saveConcert(){
      const title = document.getElementById("concertTitle").value.trim();
      const url   = document.getElementById("concertUrl").value.trim();
      const imgFile = document.getElementById("concertThumb").files[0];

      if(!title || !url || !imgFile){
        alert("Please add Title + Link + Thumbnail Image");
        return;
      }

      const reader = new FileReader();
      reader.onload = ()=>{
        const item = {
          id: "c_" + Date.now(),
          title,
          url,
          img: reader.result, // base64
          meta: "Watch"
        };

        const arr = getDynamic();
        arr.push(item);
        setDynamic(arr);

        const card = makeCard(item, { type:"dynamic", key:item.id });
        grid.appendChild(card);

        closeUpload();
        applySearch();
      };
      reader.readAsDataURL(imgFile);
    }
    document.getElementById("saveBtn").onclick = saveConcert;

    renderAll();
  </script>
</body>
</html>
