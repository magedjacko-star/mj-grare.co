<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Movies | Michael Jackson</title>

<style>
  :root{
    --red:#e50914;
    --bg:#000;
    --panel:#0b0b0b;
    --panel2:#111;
    --line:#1f1f1f;
    --muted:#b3b3b3;
  }
  *{ box-sizing:border-box; }
  body{ margin:0; background:var(--bg); color:#fff; font-family: Arial, sans-serif; }

  .content{ padding:26px; }

  .header{
    max-width:1200px;
    margin:0 auto 18px;
    text-align:center;
  }
  h1{
    color:var(--red);
    margin:8px 0 6px;
    font-size:42px;
    letter-spacing:.5px;
  }
  .sub{ color:var(--muted); margin:0 0 14px; font-size:14px; }

  .topbar{
    max-width:1200px;
    margin:0 auto 18px;
    display:flex;
    gap:12px;
    align-items:center;
    justify-content:center;
    flex-wrap:wrap;
  }
  .search{
    width:min(560px, 92vw);
    padding:12px 14px;
    border-radius:12px;
    border:1px solid #2a2a2a;
    background:#0b0b0b;
    color:#fff;
    outline:none;
    font-size:15px;
  }

  .grid{
    max-width:1200px;
    margin:0 auto;
    display:grid;
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    gap:18px;
  }

  .card{
    position:relative;
    background:linear-gradient(180deg, var(--panel2), var(--panel));
    border:1px solid var(--line);
    border-radius:14px;
    overflow:hidden;
    box-shadow:0 0 18px rgba(255,255,255,.06);
    transform:translateY(10px);
    opacity:0;
    animation:fadeUp .55s ease forwards;
  }
  @keyframes fadeUp{ to { opacity:1; transform:translateY(0); } }

  .card a{ text-decoration:none; color:inherit; display:block; }

  .thumb{ position:relative; overflow:hidden; background:#000; }
  .thumb img{
    width:100%;
    height:165px;
    object-fit:cover;
    display:block;
    transform:scale(1);
    transition:transform .25s ease;
  }

  .card:hover{
    transform:translateY(-4px) scale(1.03);
    box-shadow:0 0 45px rgba(229,9,20,.35);
    border-color:rgba(229,9,20,.35);
  }
  .card:hover .thumb img{ transform:scale(1.08); }

  .badge{
    position:absolute;
    left:12px;
    bottom:12px;
    padding:8px 12px;
    border-radius:999px;
    font-weight:800;
    background:rgba(0,0,0,.65);
    border:1px solid rgba(255,255,255,.08);
    backdrop-filter: blur(4px);
    display:inline-flex;
    align-items:center;
    gap:8px;
  }
  .badge .dot{
    width:10px; height:10px;
    border-radius:50%;
    background:var(--red);
    box-shadow:0 0 14px rgba(229,9,20,.8);
  }

  .title{
    padding:14px 14px 6px;
    font-weight:900;
    text-align:center;
    font-size:18px;
    letter-spacing:.2px;
  }
  .meta{
    padding:0 14px 14px;
    text-align:center;
    color:var(--muted);
    font-size:13px;
    line-height:1.4;
  }

  .footerWrap{
    max-width:1200px;
    margin:44px auto 0;
    padding:26px 0 10px;
    background:linear-gradient(0deg,#000 65%, transparent);
  }
  .footer{
    display:flex;
    justify-content:center;
    gap:12px;
    flex-wrap:wrap;
  }
  .footer a{
    display:inline-block;
    padding:12px 20px;
    border-radius:10px;
    background:#2b2b2b;
    color:#fff;
    text-decoration:none;
    font-weight:800;
    transition:.2s;
  }
  .footer a:hover{ background:var(--red); transform:scale(1.03); }

  #adminBar{
    position:fixed; bottom:24px; right:24px;
    display:none; gap:10px; z-index:1000;
  }
  .adminBtn{
    background:var(--red);
    color:#fff;
    border:none;
    padding:14px 18px;
    border-radius:12px;
    font-weight:800;
    cursor:pointer;
    box-shadow:0 0 18px rgba(229,9,20,.6);
  }
  .adminBtn.secondary{ background:#333; box-shadow:0 0 12px rgba(255,255,255,.12); }

  .delBadge{
    position:absolute; top:10px; right:10px;
    background:rgba(229,9,20,.95);
    color:#fff;
    border:none;
    border-radius:10px;
    padding:8px 10px;
    font-weight:900;
    cursor:pointer;
    display:none;
    z-index:5;
    box-shadow:0 0 14px rgba(229,9,20,.55);
  }
  body.admin .delBadge{ display:block; }

  #uploadModal{
    position:fixed; inset:0;
    background:rgba(0,0,0,.85);
    display:none;
    align-items:center;
    justify-content:center;
    z-index:999;
    padding:18px;
  }
  .modal-box{
    background:#111;
    padding:22px;
    border-radius:14px;
    width:min(380px, 92vw);
    text-align:center;
    border:1px solid rgba(255,255,255,.08);
    box-shadow:0 0 22px rgba(255,255,255,.10);
  }
  .modal-box h2{ margin:0 0 10px; color:#fff; }
  .modal-box input{
    width:100%;
    margin:8px 0;
    padding:10px;
    border-radius:8px;
    border:none;
    outline:none;
  }
  .modal-box button{
    width:100%;
    padding:10px;
    margin-top:8px;
    border:none;
    border-radius:8px;
    font-weight:900;
    cursor:pointer;
  }
  .modal-box .save{ background:var(--red); color:#fff; }
  .modal-box .cancel{ background:#444; color:#fff; }
  .hint{
    margin:10px auto 0;
    max-width:360px;
    color:rgba(255,255,255,.65);
    font-size:12px;
    line-height:1.5;
    text-align:left;
  }
</style>
</head>

<body>

<main class="content">
  <div class="header">
    <h1>Michael Jackson Movies</h1>
    <p class="sub">Click any poster to watch</p>
  </div>

  <div class="topbar">
    <input id="q" class="search" type="text" placeholder="Search movies..." />
  </div>

  <div id="grid" class="grid">

    <div class="card" data-static="1" data-key="thriller">
      <button class="delBadge" type="button">üóëÔ∏è Delete</button>
      <a href="https://youtu.be/sOnqjkJTMaA?si=-m8Boz-F7HRuNGCu" target="_blank" rel="noopener">
        <div class="thumb">
          <img src="thumbs/Michael-Jackson-Thriller-short-film.jpg" alt="Michael Jackson Thriller short film">
          <div class="badge"><span class="dot"></span> Watch</div>
        </div>
        <div class="title">Michael Jackson Thriller short film</div>
        <div class="meta">YouTube</div>
      </a>
    </div>

    <div class="card" data-static="1" data-key="moonwalker">
      <button class="delBadge" type="button">üóëÔ∏è Delete</button>
      <a href="https://youtu.be/BU69WKKfORc?si=8_Y4o4dRdNFwchUx" target="_blank" rel="noopener">
        <div class="thumb">
          <img src="thumbs/Michael-Jackson-Moonwalker.jpg" alt="Michael Jackson Moonwalker">
          <div class="badge"><span class="dot"></span> Watch</div>
        </div>
        <div class="title">Michael Jackson Moonwalker</div>
        <div class="meta">YouTube</div>
      </a>
    </div>

    <div class="card" data-static="1" data-key="captaineo">
      <button class="delBadge" type="button">üóëÔ∏è Delete</button>
      <a href="https://youtu.be/YwMfeKFp2H4?si=FPbHGLC3-RA1tBkw" target="_blank" rel="noopener">
        <div class="thumb">
          <img src="thumbs/Michael-Jackson-Captain-EO.jpg" alt="Michael Jackson Captain EO">
          <div class="badge"><span class="dot"></span> Watch</div>
        </div>
        <div class="title">Michael Jackson Captain EO</div>
        <div class="meta">YouTube</div>
      </a>
    </div>

    <div class="card" data-static="1" data-key="ghosts">
      <button class="delBadge" type="button">üóëÔ∏è Delete</button>
      <a href="https://youtu.be/TEet4nn2G_8?si=hLrF_56gYpnHJOk8" target="_blank" rel="noopener">
        <div class="thumb">
          <img src="thumbs/Michael-Jackson-Ghosts.jpg" alt="Michael Jackson Ghosts">
          <div class="badge"><span class="dot"></span> Watch</div>
        </div>
        <div class="title">Michael Jackson Ghosts</div>
        <div class="meta">YouTube</div>
      </a>
    </div>

    <div class="card" data-static="1" data-key="yourockmyworld">
      <button class="delBadge" type="button">üóëÔ∏è Delete</button>
      <a href="https://youtu.be/Lv5UQTREiWQ?si=d4eZRat6NDsjfGmM" target="_blank" rel="noopener">
        <div class="thumb">
          <img src="thumbs/Micheal-Jackson You-Rock-My-World.jpg" alt="You Rock My World Official">
          <div class="badge"><span class="dot"></span> Watch</div>
        </div>
        <div class="title">You Rock My World Official</div>
        <div class="meta">YouTube</div>
      </a>
    </div>

  </div>

  <div class="footerWrap">
    <div class="footer">
      <a href="../index.html">üè† Back to Home</a>
    </div>
  </div>
</main>

<div id="adminBar">
  <button id="uploadBtn" class="adminBtn" type="button">‚ûï Upload</button>
  <button id="exitAdminBtn" class="adminBtn secondary" type="button">‚úñ Exit</button>
</div>

<div id="uploadModal">
  <div class="modal-box">
    <h2>Upload New Movie</h2>
    <input id="movieTitle" type="text" placeholder="Movie Title" />
    <input id="movieUrl" type="text" placeholder="YouTube link (or any link)" />
    <input id="movieThumb" type="file" accept="image/*" />
    <button class="save" id="saveBtn" type="button">Save Movie</button>
    <button class="cancel" id="cancelUploadBtn" type="button">Cancel</button>

    <div class="hint">
      <b>Note:</b> This adds the movie to <u>this browser only</u> (localStorage).<br/>
      For everyone: add it static or store in database.
    </div>
  </div>
</div>

<script>
  const grid        = document.getElementById("grid");
  const q           = document.getElementById("q");
  const adminBar    = document.getElementById("adminBar");
  const uploadModal = document.getElementById("uploadModal");

  const LS_MOVIES        = "mj_movies";
  const LS_HIDDEN_STATIC = "mj_hidden_static_movies";
  const LS_ADMIN_FLAG    = "mj_admin_movies";

  function escapeHtml(s){
    return String(s).replace(/[&<>"']/g, (m) => ({
      "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
    }[m]));
  }

  function getMovies(){ try { return JSON.parse(localStorage.getItem(LS_MOVIES) || "[]"); } catch(e){ return []; } }
  function setMovies(arr){ localStorage.setItem(LS_MOVIES, JSON.stringify(arr)); }

  function getHiddenStatic(){ try { return JSON.parse(localStorage.getItem(LS_HIDDEN_STATIC) || "[]"); } catch(e){ return []; } }
  function setHiddenStatic(arr){ localStorage.setItem(LS_HIDDEN_STATIC, JSON.stringify(arr)); }

  function enableAdmin(){ document.body.classList.add("admin"); adminBar.style.display = "flex"; localStorage.setItem(LS_ADMIN_FLAG, "1"); }
  function disableAdmin(){ document.body.classList.remove("admin"); adminBar.style.display = "none"; localStorage.setItem(LS_ADMIN_FLAG, "0"); closeUpload(); }

  document.addEventListener("keydown", (e)=>{
    if(e.ctrlKey && e.shiftKey && e.key.toLowerCase()==="m"){
      const on = localStorage.getItem(LS_ADMIN_FLAG) === "1";
      if(on) disableAdmin(); else enableAdmin();
    }
  });
  if(localStorage.getItem(LS_ADMIN_FLAG) === "1"){ enableAdmin(); }
  document.getElementById("exitAdminBtn").onclick = disableAdmin;

  document.getElementById("uploadBtn").onclick = ()=>{ uploadModal.style.display = "flex"; };

  function closeUpload(){
    uploadModal.style.display = "none";
    document.getElementById("movieTitle").value = "";
    document.getElementById("movieUrl").value   = "";
    document.getElementById("movieThumb").value = "";
  }
  document.getElementById("cancelUploadBtn").onclick = closeUpload;

  function isValidUrl(str){ try { new URL(str); return true; } catch(e){ return false; } }

  function renderDynamicMovie(m){
    const card = document.createElement("div");
    card.className = "card";
    card.dataset.dynamic = "1";
    card.dataset.movieId = m.id;
    card.dataset.title = m.title.toLowerCase();

    card.innerHTML = `
      <button class="delBadge" type="button">üóëÔ∏è Delete</button>
      <a href="${m.url}" target="_blank" rel="noopener">
        <div class="thumb">
          <img src="${m.thumb}" alt="${escapeHtml(m.title)}">
          <div class="badge"><span class="dot"></span> Watch</div>
        </div>
        <div class="title">${escapeHtml(m.title)}</div>
        <div class="meta">${escapeHtml(m.meta || "Link")}</div>
      </a>
    `;

    card.querySelector(".delBadge").addEventListener("click", (ev)=>{
      ev.preventDefault(); ev.stopPropagation();
      if(!confirm("Delete this movie?")) return;
      setMovies(getMovies().filter(x => x.id !== m.id));
      card.remove();
    });

    grid.appendChild(card);
  }

  function wireStaticDeletes(){
    const hidden = new Set(getHiddenStatic());
    document.querySelectorAll('.card[data-static="1"]').forEach(card=>{
      const key = card.getAttribute("data-key");
      if(hidden.has(key)){ card.remove(); return; }

      const btn = card.querySelector(".delBadge");
      if(btn){
        btn.addEventListener("click", (ev)=>{
          ev.preventDefault(); ev.stopPropagation();
          if(!confirm("Hide/Delete this static movie from the page?")) return;
          const arr = getHiddenStatic(); arr.push(key); setHiddenStatic(arr);
          card.remove();
        });
      }

      const t = card.querySelector(".title")?.textContent || "";
      card.dataset.title = t.toLowerCase();
    });
  }

  document.getElementById("saveBtn").onclick = ()=>{
    const title = document.getElementById("movieTitle").value.trim();
    const url   = document.getElementById("movieUrl").value.trim();
    const file  = document.getElementById("movieThumb").files[0];

    if(!title || !url || !file){ alert("Please add Title + Link + Poster Image"); return; }
    if(!isValidUrl(url)){ alert("Please paste a valid link (https://...)"); return; }

    const reader = new FileReader();
    reader.onload = ()=>{
      const movie = { id:"m_" + Date.now(), title, url, thumb: reader.result, meta:"Link" };
      const movies = getMovies(); movies.push(movie); setMovies(movies);
      renderDynamicMovie(movie);
      closeUpload();
    };
    reader.readAsDataURL(file);
  };

  getMovies().forEach(renderDynamicMovie);
  wireStaticDeletes();

  q.addEventListener("input", ()=>{
    const term = q.value.trim().toLowerCase();
    document.querySelectorAll(".card").forEach(card=>{
      const t = (card.dataset.title || "").toLowerCase();
      card.style.display = t.includes(term) ? "" : "none";
    });
  });
</script>

</body>
</html>
